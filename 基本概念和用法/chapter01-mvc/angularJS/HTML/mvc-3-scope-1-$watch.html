<!DOCTYPE html>
<html ng-app="myApp">
<head>
<meta charset="utf-8">
<title>AngularJS之$watch方法（监控动作）</title>
</head>
<body ng-controller="myCtrl">
<input  ng-model="people.name" />
<hr/>
变化了：{{count}}次
</body>
<script src="../JS/angular.min.js"></script>
<script>
   angular.module("myApp",[]).controller(
           "myCtrl",
           function ($scope) {
               $scope.people={
                   name:"zhangSan"
               };
               $scope.count = 0;
               $scope.$watch("people.name",function () {
                   $scope.count++;
               });
           }

   )
   /*
   $watch简单使用

   $watch是一个scope函数，用于监听模型变化，当你的模型部分发生变化时它会通知你。



   $watch(watchExpression, listener, objectEquality);

   每个参数的说明如下：

   watchExpression：监听的对象，它可以是一个angular表达式如'name',或函数如function(){return $scope.name}。

   listener:当watchExpression变化时会被调用的函数或者表达式,它接收3个参数：newValue(新值), oldValue(旧值), scope(作用域的引用)

   objectEquality：是否深度监听，如果设置为true,它告诉Angular检查所监控的对象中每一个属性的变化. 如果你希望监控数组的个别元素或者对象的属性而不是一个普通的值, 那么你应该使用它



   举个栗子：

   $scope.name = 'hello';

   var watch = $scope.$watch('name',function(newValue,oldValue, scope){

       console.log(newValue);

       console.log(oldValue);

   });

   $timeout(function(){

       $scope.name = "world";

   },1000);



   $watch性能问题

   太多的$watch将会导致性能问题，$watch如果不再使用，我们最好将其释放掉。

   $watch函数返回一个注销监听的函数，如果我们想监控一个属性，然后在稍后注销它，可以使用下面的方式：

   var watch = $scope.$watch('someModel.someProperty', callback);

   //...

   watch();



   还有2个和$watch相关的函数：

   $watchGroup(watchExpressions, listener);

   $watchCollection(obj, listener);
*/

</script>
</html>